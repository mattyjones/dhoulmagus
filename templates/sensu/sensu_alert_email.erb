<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">

<body style="font-family:Verdana, sans-serif;font-size:8pt;width:600px;">

  <% if @sensu_config['sensu_env'] == 'Prod: ' %>
    <p> Sensu - <a href="">Production</a></p>
  <% elsif @sensu_config['sensu_env'] == 'Dev:: ' %>
    <p> Sensu - <a href="">Development</a></p>
  <% elsif @sensu_config['sensu_env'] == 'KitchenCI:: ' %>
    <p> Sensu - <a href="">KitchenCI</a></p>
  <% elsif @sensu_config['sensu_env'] == 'Stg: ' %>
    <p> Sensu - <a href="">Staging</a></p>
  <% elsif @sensu_config['sensu_env'] == 'Vagrant: ' %>
    <p> Sensu - <a href="">Vagrant</a></p>
  <% else %>
    <p> Sensu - Testing</a></p>
  <% end %>

  <table style="text-align:left;width:600px;margin-left:auto;margin-right:auto;">
    <tr>
      <th colspan=2 style="background-color:#660099;color:#ffffff;font-family:Verdana, sans-serif;font-size:8pt;text-align:left;width:180px;"></th>
    </tr>

    <tr>
      <th style="background-color:#D9D9D9;">Notification Type:</th>
      <% if @sensu_config['notification_type'] == 'ALERT' %>
        <% @row_style = "color:#FF0000;background-color:#F2F2F2;" %>
      <% elsif @sensu_config['notification_type'] == 'CLEAR' %>
        <% @row_style = "color:#33CC33;background-color:#F2F2F2;" %>
      <% elsif @sensu_config['notification_type'] == 'FLAPPING' %>
        <% @row_style = "color:#0000FF;background-color:#F2F2F2;" %>
      <% elsif @sensu_config['notification_type'] == 'NOTICE' %>
        <% @row_style = "color:#000000;background-color:#F2F2F2;" %>
      <% else %>
        <% @row_style = "background-color:#F2F2F2;color:FF6600" %>
      <% end %>
      <td style="<%= @row_style %>"><%= @sensu_config['notification_type'] %></td>
    </tr>

    <tr>
      <th style="background-color:#F2F2F2;">Monitored Instance:</th>
      <td style="background-color:#D9D9D9;"><%= @sensu_config['monitored_instance'] %></td>
    </tr>

    <tr>
      <th style="background-color:#D9D9D9;">Sensu Client:</th>
      <td style="background-color:#F2F2F2;"><%= @sensu_config['sensu_client'] %></td>
    </tr>

    <tr>
      <th style="background-color:#F2F2F2;">Monitored Instance IP:</th>
      <td style="background-color:#D9D9D9;"><%= @sensu_config['instance_address'] %></td>
    </tr>

    <tr>
      <th style="background-color:#D9D9D9;">Check Name:</th>
      <td style="background-color:#F2F2F2;"><%= @sensu_config['check_name'] %></td>
    </tr>

    <tr>
      <th style="background-color:#F2F2F2;">Check State:</th>
      <% if @sensu_config['check_state'] == 'OK' %>
        <% @row_style = 'color:#33CC33;background-color:#D9D9D9;' %>
      <% elsif @sensu_config['check_state'] == 'UNKNOWN' %>
        <% @row_style = 'color:#FF6600;background-color:#D9D9D9;' %>
      <% elsif @sensu_config['check_state'] == 'CRITICAL' %>
        <% @row_style = 'color:#FF0000;background-color:#D9D9D9;' %>
        <% elsif @sensu_config['check_state'] == 'CONFIG ERROR' %>
          <% @row_style = 'color:#FF0000;background-color:#D9D9D9;' %>
      <% elsif @sensu_config['check_state'] == 'WARNING' %>
        <% @row_style = 'color:#B2B200;background-color:#D9D9D9;' %>
      <% else %>
        <% @row_style = 'color:FF6600;background-color:#D9D9D9;' %>
      <% end %>
      <td style="<%= @row_style %>"><%= @sensu_config['check_state'] %></td>
    </tr>

    <tr>
      <th style="background-color:#D9D9D9;">Check State Duration:</th>
      <td style="background-color:#F2F2F2;"><%= @sensu_config['check_state_duration'] %></td>
    </tr>

    <tr>
      <th style="background-color:#F2F2F2;">Check Output:</th>
      <td style="background-color:#D9D9D9;"><%= @sensu_config['check_output'] %></td>
    </tr>

    <tr>
      <th style="background-color:#D9D9D9;">Check Data:</th>
      <td style="background-color:#F2F2F2;"><%= @sensu_config['check_data'] %></td>
    </tr>

    <tr>
      <th style="background-color:#F2F2F2;">Event Time:</th>
      <td style="background-color:#D9D9D9;"><%= @sensu_config['incident_timestamp'] %></td>
    </tr>

    <tr>
      <th style="background-color:#D9D9D9;">Runbook:</th>
      <td style="background-color:#F2F2F2;"></td>
    </tr>

    <tr>
      <th style="background-color:#F2F2F2;">??</th>
      <td style="background-color:#D9D9D9;"></td>
    </tr>

    <tr>
      <th style="background-color:#D9D9D9;">Notification Comment:</th>
      <td style="background-color:#F2F2F2;"><%= @sensu_config['notification_comment'] %></td>
    </tr>

    <tr>
      <th style="background-color:#F2F2F2;">Notification Author:</th>
      <td style="background-color:#D9D9D9;"><%= @sensu_config['notification_author'] %></td>
    </tr>

  </table>

  <!-- <pre>


  </pre> -->

  <!-- <b> Client Alert Summary: </b><br />

  <table style="text-align:left;width:600px;margin-left:auto;margin-right:auto;">
    <tr>
      <th colspan=2 style="background-color:#660099;color:#ffffff;font-family:Verdana, sans-serif;font-size:8pt;text-align:left;width:100px;table-layout:fixed;"></th>
    </tr>
    <% for @k, @v in @sensu_config['additional_alerts'] %>
    <tr>
      <td style="background-color:#D9D9D9;width:50px"><a href="http//127.0.0.1:9943/#/client/default/<%= @sensu_config['sensu_client'] %>?check=<%= @k %>"><%= @k %></a></td>
      <% if @v == 'UNKNOWN' %>
        <% @row_style = 'color:#FF6600;background-color:#F2F2F2;width:50px;' %>
      <% elsif @v == 'CRITICAL' %>
        <% @row_style = 'color:#FF0000;background-color:#F2F2F2;width:50px;' %>
        <% elsif @v == 'CONFIG ERROR' %>
          <% @row_style = 'color:#FF0000;background-color:#F2F2F2;width:50px;' %>
      <% elsif @v == 'WARNING' %>
        <% @row_style = 'color:#B2B200;background-color:#F2F2F2;width:50px;' %>
      <% else %>
        <% @row_style = 'color:FF6600;background-color:#F2F2F2;width:50px;' %>
      <% end %>
      <td style="<%= @row_style %>"><%= @v %></td>
    </tr>
    <% end %>
  </table> -->
</body>
</html>
